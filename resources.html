<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<meta http-equiv="Content-Language" content="en">
<meta name="google" content="notranslate">

<title>My Refund — Resources</title>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<style>
:root{
  --g0:#094B35;
  --text:#111827;
  --radius:16px;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:"Okta Neue", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--text);
}

/* ===== HEADER ===== */
.header{
  background:var(--g0);
  color:#fff;
  padding:16px 24px;
}

.header-inner{
  max-width:1300px;
  margin:0 auto;
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.brand{
  display:flex;
  align-items:center;
  gap:14px;
}

.brand img{
  height:28px;
}

.brand-text{
  display:flex;
  flex-direction:column;
  line-height:1.15;
}

.brand-text strong{
  font-size:16px;
  font-weight:900;
}

.brand-text span{
  font-size:13px;
  opacity:.9;
  font-weight:700;
}

.menu{
  display:flex;
  gap:10px;
}

.menu button{
  border-radius:999px;
  padding:8px 16px;
  font-weight:900;
  font-size:13px;
  border:1px solid #fff;
  background:#fff;
  color:var(--g0);
  cursor:pointer;
}

/* ===== PAGE ===== */
.page{
  min-height:calc(100vh - 72px);
  background:url("My Refund-Hero Images-02 (1).jpg") center / cover no-repeat;
  display:grid;
  grid-template-columns:1fr 1fr;
}

/* ===== COLUMN ===== */
.column{
  padding:60px 60px;
}

.section-title{
  font-size:20px;
  font-weight:900;
  color:var(--g0);
  margin-bottom:20px;
}

/* ===== RESULTS ===== */
.results{
  display:flex;
  flex-direction:column;
  gap:20px;
}

.result-card{
  background:#fff;
  border-radius:14px;
  padding:20px;
  box-shadow:0 10px 30px rgba(0,0,0,.08);
}

.badge{
  display:inline-block;
  background:rgba(9,75,53,.10);
  color:var(--g0);
  font-weight:900;
  font-size:12px;
  padding:6px 10px;
  border-radius:999px;
  margin-bottom:10px;
}

.result-card h3{
  margin:6px 0 14px;
  font-size:18px;
  font-weight:900;
  color:var(--g0);
}

.result-card a{
  font-weight:900;
  color:var(--g0);
  text-decoration:none;
}

.result-card a:hover{
  text-decoration:underline;
}

/* ===== RESPONSIVE ===== */
@media(max-width:1000px){
  .page{
    grid-template-columns:1fr;
  }
}
</style>
</head>

<body>

<div class="header">
  <div class="header-inner">
    <div class="brand">
      <img src="logo.png" alt="My Refund">
      <div class="brand-text">
        <strong>Resources</strong>
        <span>Procedures & Operational Guides</span>
      </div>
    </div>

    <div class="menu">
      <button onclick="goDashboard()">Dashboard</button>
      <button onclick="goReports()">Reports</button>
    </div>
  </div>
</div>

<div class="page">

  <div class="column">
    <div class="section-title">Resources</div>

    <div class="results" id="results">
      Loading procedures...
    </div>
  </div>

  <div class="column">
    <!-- Reserved for future search panel -->
  </div>

</div>

<script>
const resourceFiles = [
  "ird-amendment-process.md"
];

const resultsContainer = document.getElementById("results");

async function loadResources() {
  resultsContainer.innerHTML = "";

  for (let file of resourceFiles) {
    const response = await fetch("resources/" + file);
    const text = await response.text();

    const parsed = parseFrontmatter(text);
    renderResource(parsed, file);
  }
}

function parseFrontmatter(markdown) {
  const match = markdown.match(/---([\s\S]*?)---/);
  let frontmatter = {};
  let content = markdown;

  if (match) {
    const fmText = match[1];
    content = markdown.replace(match[0], "");

    fmText.split("\n").forEach(line => {
      const [key, ...rest] = line.split(":");
      if (!key) return;
      frontmatter[key.trim()] = rest.join(":").trim();
    });
  }

  return {
    title: frontmatter.title || "Untitled",
    lastUpdated: frontmatter.lastUpdated || "",
    content
  };
}

function renderResource(data, filename) {
  const card = document.createElement("div");
  card.className = "result-card";

  const badge = document.createElement("span");
  badge.className = "badge";
  badge.textContent = "Last Updated: " + data.lastUpdated;

  const title = document.createElement("h3");
  title.textContent = data.title;

  const body = document.createElement("div");
  body.innerHTML = marked.parse(data.content);

  const historyLink = document.createElement("p");
  historyLink.innerHTML = `
    <a href="https://github.com/MyRefund/StaffDashboard/commits/main/resources/${filename}" target="_blank">
      View Version History →
    </a>
  `;

  card.appendChild(badge);
  card.appendChild(title);
  card.appendChild(body);
  card.appendChild(historyLink);

  resultsContainer.appendChild(card);
}

function goDashboard(){
  window.location.href = "staff.html";
}

function goReports(){
  window.location.href = "reports.html";
}

loadResources();
</script>

</body>
</html>
