<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>My Refund — Admin</title>

<style>
:root{
  --g0:#094B35;
  --g1:#03953F;
  --g2:#ECFDF5;
  --g3:#BBF7D0;
  --border:#e5e7eb;
  --text:#111827;
  --muted:#6b7280;
  --radius:16px;
  --shadow:0 10px 25px rgba(0,0,0,.06);
}

body{
  margin:0;
  font-family:"Okta Neue", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  background:linear-gradient(180deg,var(--g2),#fff 60%);
  color:var(--text);
}

.wrap{max-width:1200px;margin:0 auto;padding:20px 20px 48px;}

header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  background:#fff;
  border:1px solid var(--border);
  border-radius:20px;
  padding:12px 16px;
  box-shadow:var(--shadow);
  position:sticky;
  top:10px;
  z-index:10;
}

.brand{display:flex;align-items:center;gap:12px;}
.brand img{height:30px;}
.brand strong{color:var(--g0);}

nav{display:flex;gap:8px;flex-wrap:wrap;}
nav button{
  border:none;
  background:var(--g2);
  color:var(--g0);
  padding:8px 14px;
  border-radius:999px;
  font-weight:900;
  cursor:pointer;
}
nav button.active{
  background:var(--g0);
  color:#fff;
}

.section{display:none;margin-top:20px;}
.section.active{display:block;}

.card{
  background:#fff;
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:16px;
  margin-bottom:16px;
}

.card h2{margin:0 0 12px;color:var(--g0);}
.card small{color:var(--muted);}

.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px;}

input, textarea, select{
  width:100%;
  padding:8px;
  border-radius:10px;
  border:1px solid var(--border);
  font-size:14px;
}

textarea{resize:vertical;}

button.primary{
  background:var(--g0);
  color:#fff;
  border:none;
  border-radius:10px;
  padding:10px 14px;
  font-weight:900;
  cursor:pointer;
}

.list{
  display:flex;
  flex-direction:column;
  gap:8px;
}

.row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:var(--g2);
  padding:10px 12px;
  border-radius:12px;
  font-weight:800;
}

.muted{color:var(--muted);}

footer{
  margin-top:40px;
  font-size:12px;
  color:var(--muted);
  text-align:center;
}
</style>
</head>

<body>
<div class="wrap">

<header>
  <div class="brand">
    <img src="assets/logo.png" onerror="this.style.display='none'">
    <strong>Admin</strong>
  </div>

  <nav>
    <button class="active" data-tab="overview">Overview</button>
    <button data-tab="rundown">Rundown</button>
    <button data-tab="allocation">Allocation / Breaks / Notes</button>
    <button data-tab="users">Users</button>
  </nav>
</header>

<!-- OVERVIEW -->
<div class="section active" id="overview">
  <div class="card">
    <h2>Staff currently working</h2>
    <div id="overviewList" class="list"></div>
  </div>
</div>

<!-- RUNDOWN -->
<div class="section" id="rundown">
  <div class="card">
    <h2>Today’s work completed</h2>
    <div id="rundownList" class="list"></div>
  </div>
</div>

<!-- ALLOCATION / BREAKS / NOTES -->
<div class="section" id="allocation">
  <div class="card">
    <h2>Staff control</h2>
    <small>Allocate work, set breaks, and add notes</small>

    <div class="grid" style="margin-top:12px;">
      <select id="staffSelect"></select>

      <textarea id="notesInput" placeholder="Notes for this staff member"></textarea>

      <input id="breaksInput" placeholder="Break times (e.g. 10:30, 13:00, 15:30)">
    </div>

    <button class="primary" style="margin-top:12px;" onclick="saveStaffControl()">Save</button>
  </div>
</div>

<!-- USERS -->
<div class="section" id="users">
  <div class="card">
    <h2>Users</h2>

    <div class="grid">
      <input id="newUserName" placeholder="New staff name">
      <button class="primary" onclick="addUser()">Add user</button>
    </div>

    <div class="list" id="usersList" style="margin-top:12px;"></div>
  </div>
</div>

<footer>
  My Refund — Internal admin
</footer>

</div>

<script>
/* ===== STORAGE ===== */
const USERS_KEY = "myrefund_users";
const STAFF_DATA_KEY = "myrefund_staff_data";

/* ===== TABS ===== */
document.querySelectorAll("nav button").forEach(btn=>{
  btn.onclick=()=>{
    document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
    document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
    btn.classList.add("active");
    document.getElementById(btn.dataset.tab).classList.add("active");
  };
});

/* ===== USERS ===== */
function getUsers(){
  return JSON.parse(localStorage.getItem(USERS_KEY)||"[]");
}
function saveUsers(u){localStorage.setItem(USERS_KEY,JSON.stringify(u));}

function addUser(){
  const name=document.getElementById("newUserName").value.trim();
  if(!name)return;
  const users=getUsers();
  users.push(name);
  saveUsers(users);
  document.getElementById("newUserName").value="";
  renderUsers();
  renderStaffSelect();
}

function renderUsers(){
  const el=document.getElementById("usersList");
  el.innerHTML="";
  getUsers().forEach(u=>{
    const r=document.createElement("div");
    r.className="row";
    r.innerHTML=`${u} <button onclick="removeUser('${u}')">Remove</button>`;
    el.appendChild(r);
  });
}
function removeUser(u){
  saveUsers(getUsers().filter(x=>x!==u));
  renderUsers();
  renderStaffSelect();
}

/* ===== STAFF DATA ===== */
function getStaffData(){
  return JSON.parse(localStorage.getItem(STAFF_DATA_KEY)||"{}");
}
function saveStaffData(d){
  localStorage.setItem(STAFF_DATA_KEY,JSON.stringify(d));
}

function renderStaffSelect(){
  const sel=document.getElementById("staffSelect");
  sel.innerHTML="";
  getUsers().forEach(u=>{
    const o=document.createElement("option");
    o.value=u;o.textContent=u;
    sel.appendChild(o);
  });
}

/* ===== CONTROL SAVE ===== */
function saveStaffControl(){
  const staff=document.getElementById("staffSelect").value;
  const notes=document.getElementById("notesInput").value;
  const breaks=document.getElementById("breaksInput").value;

  const data=getStaffData();
  data[staff]={notes,breaks};
  saveStaffData(data);
  alert("Saved");
}

/* ===== OVERVIEW / RUNDOWN (BROWSER DATA) ===== */
function renderOverview(){
  const el=document.getElementById("overviewList");
  el.innerHTML="";
  getUsers().forEach(u=>{
    const r=document.createElement("div");
    r.className="row";
    r.innerHTML=`${u} <span class="muted">Working</span>`;
    el.appendChild(r);
  });
}

function renderRundown(){
  const el=document.getElementById("rundownList");
  el.innerHTML="<div class='muted'>Data shown once staff submit work.</div>";
}

/* ===== INIT ===== */
renderUsers();
renderStaffSelect();
renderOverview();
renderRundown();
</script>

</body>
</html>
